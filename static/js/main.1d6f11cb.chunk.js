(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{140:function(e,t,n){e.exports=n(155)},145:function(e,t,n){},152:function(e,t){},155:function(e,t,n){"use strict";n.r(t);var a=n(10),o=n.n(a),r=n(110),i=n.n(r),c=(n(145),n(111)),s=n(112),l=n(121),u=n(113),d=n(87),m=n(122),p=n(163),h=n(165),f=n(119),v=n(162),b=n(115),y=n(116),w=n.n(y),S=n(120);var g=function(e){return o.a.createElement("div",null,o.a.createElement("div",{className:"absolute top left w300 h120 py6 px6 ml36 mt36 bg-blue prose"},o.a.createElement("h4",null,"City of Calgary Non-Residential Property Assessment"),"Deck.gl Scatterplot Layer"))},x="pk.eyJ1Ijoic2FhZGlxbSIsImEiOiJjamJpMXcxa3AyMG9zMzNyNmdxNDlneGRvIn0.wjlI8r1S_-xxtq2d-W5qPA",E={longitude:-114.062019,latitude:51.04427,zoom:10.5},_=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e)))._onWebGLInitialized=function(e){n.setState({gl:e})},n._onMapLoad=function(){var e=n._map,t=n._deck;e.addLayer(new h.a({id:"assessment-NR",deck:t}),"waterway-label")},n.state={zoom:E.zoom},n._onViewStateChange=n._onViewStateChange.bind(Object(d.a)(n)),n}return Object(m.a)(t,e),Object(s.a)(t,[{key:"_onViewStateChange",value:function(e){var t=e.viewState;this.setState({zoom:t.zoom})}},{key:"_renderLayers",value:function(){var e=this;return[new v.a({id:"assessment-NR",type:v.a,getTileData:function(e){var t=e.x,n=e.y,a=e.z,o="https://a.tiles.mapbox.com/v4/saadiqm.azk20mv4/".concat(a,"/").concat(t,"/").concat(n,".vector.pbf?access_token=").concat(x);return fetch(o).then(function(e){return e.arrayBuffer()}).then(function(e){for(var o=[],r=new b.VectorTile(new w.a(e)).layers.NR,i=0;i<r.length;i++){var c=r.feature(i).toGeoJSON(t,n,a);o.push(c)}return o})},onTileError:function(e){return console.error(e)},maxZoom:14,onHover:function(t){return e.setState({hoveredObject:t.object,pointerX:t.x,pointerY:t.y})},renderSubLayers:function(t){return new S.a(t,{opacity:.5,pickable:!0,getLineWidth:0,radiusScale:Math.pow(2,Math.max(14-e.state.zoom,0)),radiusMinPixels:1,radiusMaxPixels:90,getPosition:function(e){return e.geometry.coordinates},getFillColor:function(e){return[66,135,245]},getRadius:function(e){return Math.sqrt(e.properties.NR_ASSESSED_VALUE)/500}})}})]}},{key:"_renderTooltip",value:function(){var e=this.state||{},t=e.hoveredObject,n=e.pointerX,a=e.pointerY;return t&&o.a.createElement("div",{style:{position:"absolute",zIndex:1,pointerEvents:"none",left:n,top:a},className:"bg-lighten75 py6 px12"},o.a.createElement("p",{className:"txt-bold"},"$"+t.properties.NR_ASSESSED_VALUE.toLocaleString()),o.a.createElement("p",{className:"txt-s"},t.properties.ADDRESS))}},{key:"render",value:function(){var e=this,t=this.state.gl;return o.a.createElement("div",null,o.a.createElement(p.a,{ref:function(t){e._deck=t&&t.deck},layers:this._renderLayers(),initialViewState:E,controller:!0,onWebGLInitialized:this._onWebGLInitialized,onViewStateChange:this._onViewStateChange},t&&o.a.createElement(f.a,{ref:function(t){e._map=t&&t.getMap()},gl:t,mapStyle:"mapbox://styles/saadiqm/cjxbd493m05cc1cl29jntlb1w?optimize=true",mapboxApiAccessToken:x,onLoad:this._onMapLoad}),this._renderTooltip()),o.a.createElement(g,null))}}]),t}(o.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(o.a.createElement(_,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[140,1,2]]]);
//# sourceMappingURL=main.1d6f11cb.chunk.js.map